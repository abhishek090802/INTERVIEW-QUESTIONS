//using inorder traversal with TC=O(N) and SC=O(1) ignoring recursive stack space
class Solution {
public:
    void helper(TreeNode*root,int &ans,int k,int &count)
    {
        if(!root) return;
        helper(root->left,ans,k,count);
        if(++count==k) ans=root->val;
        helper(root->right,ans,k,count);
    }
    int kthSmallest(TreeNode* root, int k) {
        int ans=0,count=0; 
        helper(root,ans,k,count);
        return ans;
    }
};

//using morris traversal TC=O(N) and SC=O(1)
class Solution {
public:
    int kthSmallest(TreeNode* root, int k) {
       int count=0; int ans;
        TreeNode*cur=root;
        while(cur!=NULL)
        {
            if(cur->left==NULL)
            {
              if(++count==k) ans=cur->val; cur=cur->right;
            }
            else {
                TreeNode*prev=cur->left;
                while(prev->right and prev->right!=cur) {prev=prev->right;}
                if(prev->right==NULL)
                {
                    prev->right=cur;
                    cur=cur->left;
                }
                else
                {
                    prev->right=NULL;
                    if(++count==k) ans=cur->val;
                    cur=cur->right;
                }
            }
        }
       return ans;
    }
    
};

